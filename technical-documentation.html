<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Russian influence on Iźva Komi sibilant articulation</title>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
  <meta name="description" content="Russian influence on Iźva Komi sibilant articulation">
  <meta name="generator" content="bookdown 0.0.71 and GitBook 2.6.7">

  <meta property="og:title" content="Russian influence on Iźva Komi sibilant articulation" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Russian influence on Iźva Komi sibilant articulation" />
  
  
  

<meta name="author" content="Niko Partanen">

<meta name="date" content="2016-05-24">


  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="conclusions.html">
<link rel="next" href="references.html">

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

</head>

<body>


  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Preface</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#abstract"><i class="fa fa-check"></i><b>1.1</b> Abstract</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>2</b> Introduction</a><ul>
<li class="chapter" data-level="2.1" data-path="introduction.html"><a href="introduction.html#transcription-system"><i class="fa fa-check"></i><b>2.1</b> Transcription system</a><ul>
<li class="chapter" data-level="2.1.1" data-path="introduction.html"><a href="introduction.html#transcription-system"><i class="fa fa-check"></i><b>2.1.1</b> Transcription system used in this study</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="introduction.html"><a href="introduction.html#phenomena"><i class="fa fa-check"></i><b>2.2</b> Phenomena</a></li>
<li class="chapter" data-level="2.3" data-path="introduction.html"><a href="introduction.html#research-questions"><i class="fa fa-check"></i><b>2.3</b> Research questions</a></li>
<li class="chapter" data-level="2.4" data-path="introduction.html"><a href="introduction.html#data"><i class="fa fa-check"></i><b>2.4</b> Data</a><ul>
<li class="chapter" data-level="2.4.1" data-path="introduction.html"><a href="introduction.html#open-issues-with-data"><i class="fa fa-check"></i><b>2.4.1</b> Open issues with data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="methodology.html"><a href="methodology.html"><i class="fa fa-check"></i><b>3</b> Methodology</a><ul>
<li class="chapter" data-level="3.1" data-path="methodology.html"><a href="methodology.html#reproducibility"><i class="fa fa-check"></i><b>3.1</b> Reproducibility</a></li>
<li class="chapter" data-level="3.2" data-path="methodology.html"><a href="methodology.html#archiving"><i class="fa fa-check"></i><b>3.2</b> Archiving</a></li>
<li class="chapter" data-level="3.3" data-path="methodology.html"><a href="methodology.html#elan-annotations"><i class="fa fa-check"></i><b>3.3</b> ELAN annotations</a><ul>
<li class="chapter" data-level="3.3.1" data-path="methodology.html"><a href="methodology.html#caveouts-of-the-current-annotation-model"><i class="fa fa-check"></i><b>3.3.1</b> Caveouts of the current annotation model</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="methodology.html"><a href="methodology.html#automated-processing-with-r"><i class="fa fa-check"></i><b>3.4</b> Automated processing with R</a></li>
<li class="chapter" data-level="3.5" data-path="methodology.html"><a href="methodology.html#praat"><i class="fa fa-check"></i><b>3.5</b> Praat</a></li>
<li class="chapter" data-level="3.6" data-path="methodology.html"><a href="methodology.html#statistical-analysis"><i class="fa fa-check"></i><b>3.6</b> Statistical analysis</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="conclusions.html"><a href="conclusions.html"><i class="fa fa-check"></i><b>4</b> Conclusions</a><ul>
<li class="chapter" data-level="4.1" data-path="conclusions.html"><a href="conclusions.html#stable-variation-or-change-in-progress"><i class="fa fa-check"></i><b>4.1</b> Stable variation or change in progress</a></li>
<li class="chapter" data-level="4.2" data-path="conclusions.html"><a href="conclusions.html#variation-of-variable"><i class="fa fa-check"></i><b>4.2</b> Variation of variable</a></li>
<li class="chapter" data-level="4.3" data-path="conclusions.html"><a href="conclusions.html#comparable-case-studies"><i class="fa fa-check"></i><b>4.3</b> Comparable case studies</a><ul>
<li class="chapter" data-level="4.3.1" data-path="conclusions.html"><a href="conclusions.html#final-sibilant-deletion-in-brazilian-portuguese"><i class="fa fa-check"></i><b>4.3.1</b> Final sibilant deletion in Brazilian Portuguese</a></li>
<li class="chapter" data-level="4.3.2" data-path="conclusions.html"><a href="conclusions.html#salvadoran-spanish--s-deletion-and-aspiration"><i class="fa fa-check"></i><b>4.3.2</b> Salvadoran Spanish -s deletion and aspiration</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="technical-documentation.html"><a href="technical-documentation.html"><i class="fa fa-check"></i><b>5</b> Technical documentation</a><ul>
<li class="chapter" data-level="5.1" data-path="technical-documentation.html"><a href="technical-documentation.html#code"><i class="fa fa-check"></i><b>5.1</b> Code</a></li>
<li class="chapter" data-level="5.2" data-path="technical-documentation.html"><a href="technical-documentation.html#conversion-patterns"><i class="fa fa-check"></i><b>5.2</b> Conversion patterns</a></li>
<li class="chapter" data-level="5.3" data-path="technical-documentation.html"><a href="technical-documentation.html#functions"><i class="fa fa-check"></i><b>5.3</b> Functions</a><ul>
<li class="chapter" data-level="5.3.1" data-path="technical-documentation.html"><a href="technical-documentation.html#sle2016partanentransliterate"><i class="fa fa-check"></i><b>5.3.1</b> sle2016partanen::transliterate</a></li>
<li class="chapter" data-level="5.3.2" data-path="technical-documentation.html"><a href="technical-documentation.html#sle2016partanensib_tier_cyr2ipa"><i class="fa fa-check"></i><b>5.3.2</b> sle2016partanen::sib_tier_cyr2ipa</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="technical-documentation.html"><a href="technical-documentation.html#manual-tasks"><i class="fa fa-check"></i><b>5.4</b> Manual tasks</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>6</b> References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Russian influence on Iźva Komi sibilant articulation</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="technical-documentation" class="section level1">
<h1><span class="header-section-number">Section 5</span> Technical documentation</h1>
<p>This part is the technical documentation of programming part behind this study. In some sense the code should be self explanatory as it is well commented, but it is understandable that it is not very clear for those who are not familiar with the programming language used – R. I have tried to explain some very basic concepts so that also non-technical readers can familiarize themselves with this section, but the point of that is to explain what the code does, what is the human logic behind it and what are the tasks it does. The idea is not to make the code itself understandable for everyone, as this probably would not be possible. However, explaining the logic behind it must be possible.</p>
<div id="code" class="section level2">
<h2><span class="header-section-number">5.1</span> Code</h2>
<p>I had initially named this section as <strong>Scripts</strong>, however, it doesn’t really describe well R based workflows. A script usually refers to a chunk of code which is executed relatively statically. It is ran, and something happens. However, scripts can often be given arguments, for example, one could specify input and output and give some additional parameters for the script.</p>
<p>A function doesn’t differ particularly much from this, but it is more flexible unit that can be called from within different code chunks. So instead of taking x and producing y, a function can be a part of workflow where different function are interacting with one another without saving the intermediate files inbetween. Only actual <em>script</em> used here is <strong>compile.R</strong> file which has to be executed in order to compile this document.</p>
<p>In my workflow used in this study the following tasks have been assigned to different R functions.</p>
<ul>
<li>CYR to IPA conversion</li>
<li>FRelan R package for daily tasks of loading files</li>
<li>Extracting sibilant values</li>
<li>Matching lexical items</li>
<li>Reading metadata</li>
<li>Counting occurrences in the context</li>
<li>Visualizations</li>
<li>Statistical analysis</li>
</ul>
</div>
<div id="conversion-patterns" class="section level2">
<h2><span class="header-section-number">5.2</span> Conversion patterns</h2>
<p>The automatic conversion from Cyrillic transcription to IPA plays rather important part in this study, so how exactly this conversion is done is important to document. The patterns are stored in <code>ikdp2ipa.csv</code> file, and they can be freely examined or reused.</p>
</div>
<div id="functions" class="section level2">
<h2><span class="header-section-number">5.3</span> Functions</h2>
<div id="sle2016partanentransliterate" class="section level3">
<h3><span class="header-section-number">5.3.1</span> sle2016partanen::transliterate</h3>
<p>The transliteration pattern has currently some shortcomings, but they are relatively minimal and as every item as to be gone through manually anyway, this is not really an issue. For example, it is not always transparent whether consecutive sibilants such as <strong>ссь</strong> represent combination <strong>ɕɕ</strong> or <strong>sɕ</strong>. Naturally, there is often some kind of assimilation going on there anyway, although trying to identify the pattern in this could be useful task in itself later.</p>
<p>What is written above is mainly about the pattern involved, the idea being that <code>transliterate</code> function can take basically any CSV-formatted file from where it read the patters. Why CSV and not something fancier? Because editing CSV is EASY.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sle2016partanen::transliterate</code></pre></div>
<pre><code>## function(data, model){
##         pattern &lt;- read.csv(file = model, sep = &quot;,&quot;)
##         cyr &lt;- as.character(pattern[,1])
##         lat &lt;- as.character(pattern[,2])
##         multiple_replace(cyr, lat, data)
## }
## &lt;environment: namespace:sle2016partanen&gt;</code></pre>
</div>
<div id="sle2016partanensib_tier_cyr2ipa" class="section level3">
<h3><span class="header-section-number">5.3.2</span> sle2016partanen::sib_tier_cyr2ipa</h3>
<p><code>transliterate</code> function is now hard-coded into this so that it runs ikdp2ipa conversion to the sib-tier. In principle this function could be generalized into something more abstract with the idea <strong>take the tier elements, do something for each item, put them back</strong>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sle2016partanen::sib_tier_cyr2ipa</code></pre></div>
<pre><code>## function(eaf_file = &quot;./R/kpv_izva20140404IgusevJA.eaf&quot;, participant = &quot;JAI-M-1939&quot;, linguistic_type = &quot;sib&quot;){
##         
##         `%&gt;%` &lt;- dplyr::`%&gt;%`
##         
##         file &lt;- xml2::read_xml(eaf_file)
##         
##         dplyr::data_frame(
##                 Content = file %&gt;%
##                         xml2::xml_find_all(
##                                 paste0(&quot;//TIER[@LINGUISTIC_TYPE_REF=&#39;&quot;, linguistic_type, &quot;&#39; and @PARTICIPANT=&#39;&quot;,
##                                        participant,&quot;&#39;]/ANNOTATION/*/ANNOTATION_VALUE&quot;)) %&gt;%
##                         xml2::xml_text(),
##                 annot_id = file %&gt;%
##                         xml2::xml_find_all(paste0(&quot;//TIER[@LINGUISTIC_TYPE_REF=&#39;&quot;, linguistic_type, &quot;&#39; and @PARTICIPANT=&#39;&quot;,
##                                                   participant,&quot;&#39;]/ANNOTATION/*/ANNOTATION_VALUE/..&quot;)) %&gt;%
##                         xml2::xml_attr(&quot;ANNOTATION_ID&quot;),
##                 ref_id = file %&gt;%
##                         xml2::xml_find_all(
##                                 paste0(&quot;//TIER[@LINGUISTIC_TYPE_REF=&#39;&quot;, linguistic_type, &quot;&#39; and @PARTICIPANT=&#39;&quot;,
##                                        participant,&quot;&#39;]/ANNOTATION/*/ANNOTATION_VALUE/..&quot;)) %&gt;%
##                         xml2::xml_attr(&quot;ANNOTATION_REF&quot;),
##                 ts1 = file %&gt;%
##                         xml2::xml_find_all(
##                                 paste0(&quot;//TIER[@LINGUISTIC_TYPE_REF=&#39;&quot;, linguistic_type, &quot;&#39; and @PARTICIPANT=&#39;&quot;,
##                                        participant,&quot;&#39;]/ANNOTATION/*/ANNOTATION_VALUE/..&quot;)) %&gt;%
##                         xml2::xml_attr(&quot;TIME_SLOT_REF1&quot;),
##                 ts2 = file %&gt;%
##                         xml2::xml_find_all(
##                                 paste0(&quot;//TIER[@LINGUISTIC_TYPE_REF=&#39;&quot;, linguistic_type, &quot;&#39; and @PARTICIPANT=&#39;&quot;,
##                                        participant,&quot;&#39;]/ANNOTATION/*/ANNOTATION_VALUE/..&quot;)) %&gt;%
##                         xml2::xml_attr(&quot;TIME_SLOT_REF2&quot;),
##                 participant = file %&gt;%
##                         xml2::xml_find_all(
##                                 paste0(&quot;//TIER[@LINGUISTIC_TYPE_REF=&#39;&quot;, linguistic_type, &quot;&#39; and @PARTICIPANT=&#39;&quot;,
##                                        participant,&quot;&#39;]/ANNOTATION/*/ANNOTATION_VALUE/../../..&quot;)) %&gt;%
##                         xml2::xml_attr(&quot;PARTICIPANT&quot;),
##                 tier_id = file %&gt;%
##                         xml2::xml_find_all(
##                                 paste0(&quot;//TIER[@LINGUISTIC_TYPE_REF=&#39;&quot;, linguistic_type, &quot;&#39; and @PARTICIPANT=&#39;&quot;,
##                                        participant,&quot;&#39;]/ANNOTATION/*/ANNOTATION_VALUE/../../..&quot;)) %&gt;%
##                         xml2::xml_attr(&quot;TIER_ID&quot;),
##                 type = file %&gt;%
##                         xml2::xml_find_all(
##                                 paste0(&quot;//TIER[@LINGUISTIC_TYPE_REF=&#39;&quot;, linguistic_type, &quot;&#39; and @PARTICIPANT=&#39;&quot;,
##                                        participant,&quot;&#39;]/ANNOTATION/*/ANNOTATION_VALUE/../../..&quot;)) %&gt;%
##                         xml2::xml_attr(&quot;LINGUISTIC_TYPE_REF&quot;)) -&gt; content
##         
##         # In the data frame content there is now the original content of the tier
##         # We replace this with transliterated variant
## 
##         content %&gt;% dplyr::mutate(Content = sle2016partanen::transliterate(tolower(Content), &quot;R/ikdp2ipa.csv&quot;)) -&gt; content
##         
##         tier &lt;- XML::newXMLNode(&quot;TIER&quot;, attrs = c(DEFAULT_LOCALE = &quot;en&quot;,
##                                                   LINGUISTIC_TYPE_REF = linguistic_type,
##                                                   PARENT_REF = paste0(&quot;ref@&quot;, participant),
##                                                   #                                                  LANG_REF = lang,
##                                                   PARTICIPANT = participant,
##                                                   TIER_ID = paste0(&quot;sib@&quot;, participant)))
##         
##         #        This adds annotation element under tier, so it already looks like this:
##         #
##         #        &lt;TIER LINGUISTIC_TYPE_REF=&quot;sib&quot; PARENT_REF=&quot;ref@JAI-M-1939&quot; PARTICIPANT=&quot;JAI-M-1939&quot; TIER_ID=&quot;sib@JAI-M-1939&quot;&gt;
##         #               &lt;ANNOTATION/&gt;
##         #         &lt;/TIER&gt;
##         
##         #       Next step is to populate that tier
##         
##         plyr::d_ply(content, .variables = &quot;annot_id&quot;, function(x){
##                 annotation &lt;- XML::newXMLNode(&quot;ANNOTATION&quot;, parent = tier)
##                 alignable_annotation &lt;- XML::newXMLNode(&quot;ALIGNABLE_ANNOTATION&quot;,
##                                                         attrs = c(ANNOTATION_ID = x$annot_id,
##                                                                   TIME_SLOT_REF1 = x$ts1,
##                                                                   TIME_SLOT_REF2 = x$ts2),
##                                                         parent = annotation)
##                 annotation_value &lt;- XML::newXMLNode(&quot;ANNOTATION_VALUE&quot;, x$Content, parent = alignable_annotation)
##                 alignable_annotation
##         })
##         
##         
##         doc &lt;- XML::xmlParse(eaf_file)
##         
##         # Note: add speaker attribute so that we don&#39;t delete too many tiers!
##         
##         XML::removeNodes(doc[paste0(&quot;//TIER[@LINGUISTIC_TYPE_REF=&#39;&quot;, linguistic_type, &quot;&#39;]&quot;)])
##         
##         # doc
##         eaf_to_be_written &lt;- XML::getNodeSet(doc, &quot;//ANNOTATION_DOCUMENT&quot;)
##         
##         XML::xmlChildren(eaf_to_be_written[[1]]) &lt;- XML::addChildren(eaf_to_be_written[[1]], tier)
##         
##         XML::xmlChildren(eaf_to_be_written[[1]]) &lt;- c(XML::xmlChildren(eaf_to_be_written[[1]]))[c(order(factor(names(eaf_to_be_written[[1]]), 
##                                                         levels = c(&quot;HEADER&quot;,
##                                                                    &quot;TIME_ORDER&quot;, 
##                                                                    &quot;TIER&quot;, 
##                                                                    &quot;LINGUISTIC_TYPE&quot;, 
##                                                                    &quot;LOCALE&quot;, 
##                                                                    &quot;LANGUAGE&quot;, 
##                                                                    &quot;CONSTRAINT&quot;, 
##                                                                    &quot;CONTROLLED_VOCABULARY&quot;, 
##                                                                    &quot;EXTERNAL_REF&quot;))))]
##         
##         new_filename &lt;- gsub(&quot;(.+)(.eaf)$&quot;, &quot;\\1-ipa.eaf&quot;, eaf_file)
##         
##         XML::saveXML(eaf_to_be_written[[1]], new_filename)
##         
## }
## &lt;environment: namespace:sle2016partanen&gt;</code></pre>
</div>
</div>
<div id="manual-tasks" class="section level2">
<h2><span class="header-section-number">5.4</span> Manual tasks</h2>
<p>Basic annotations on ELAN files are done manually. Similarly the work relies to many features of ELAN, for example, tokenization and copying tiers is done with built-in tools.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="conclusions.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="references.html" class="navigation navigation-next " aria-label="Next page""><i class="fa fa-angle-right"></i></a>

<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/nikopartanen/sle2016partanenblob/master/04-techdoc.rmd",
"text": "Edit"
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
